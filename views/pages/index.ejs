<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>bBlog</title>
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="images/android-desktop.png">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="images/ios-desktop.png">
    
    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">
    
    <link rel="shortcut icon" href="images/favicon.png">
    
    <!-- include libraries(jQuery, bootstrap) -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-red.min.css" />
    <link rel="stylesheet" href="/styles.css">

</head>

<body class="container">

    <header>
        <%- include ../partials/header %>
    </header>
    <%if (userName != null) { %>
    <a href="/write">
        <button id="add-article"
            class="mdl-button mdl-js-ripple-effect mdl-js-button mdl-button--fab mdl-color--accent">
            <i class="material-icons mdl-color-text--white" role="presentation">assignment</i>
            <span class="visuallyhidden">assignment</span>
        </button>
    </a>
    <% } %>
    <div class="demo-blog mdl-layout mdl-js-layout has-drawer is-upgraded">
        <main class="mdl-layout__content">
            <div class="demo-blog__posts mdl-grid">
                <div class="mdl-card coffee-pic mdl-cell mdl-cell--8-col">
                    <div class="mdl-card__media mdl-color-text--grey-50">

                        <% if(userName === null){ %>
                        <h3><a>Welcome to your blog!</a></h3>
                        <% } %>
                        <% if(userName != null){ %>
                        <h3><a>Hello, <%-  userName  %></a></h3>
                        <% } %>

                    </div>
                    <div class="mdl-card__supporting-text meta mdl-color-text--grey-600">

                        <div class="minilogo"></div>
                        <div>
                            <strong>The Newist</strong>
                            <span>13 users active</span>
                        </div>
                    </div>
                    
                  
                </div>
                <div class="mdl-card something-else mdl-cell mdl-cell--8-col mdl-cell--4-col-desktop">
                   
                    <!-- Sign in segment -->
                    <% if(userName === null){ %>
                        <button class="mdl-button mdl-js-ripple-effect mdl-js-button mdl-button--fab mdl-color--accent">
                                <i class="material-icons mdl-color-text--white" role="presentation">person</i>
                                <!-- add-circle -->
                                <span class="visuallyhidden">person</span>
                            </button>
                    <div class="mdl-card__media mdl-color--white mdl-color-text--grey-600">

                        <div class="mdl-grid">
                            <div class="mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet">
                                <form action="#">
                                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                        <input class="mdl-textfield__input" type="text" id="username" />
                                        <label class="mdl-textfield__label" for="username">Username</label>

                                    </div>
                                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                        <input class="mdl-textfield__input" type="text" id="username" />
                                        <label class="mdl-textfield__label" for="password">Password</label>

                                    </div>
                                    <br><br>
                                    <button
                                        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                                        Log In
                                    </button>
                                    <br><br><br>
                                    <h8 class="mdl-color-text--black-600">No account? <a class="show-modal mdl-button--accent"
                                            href="#">Register
                                            here</a></h8>

                                </form>
                            </div>
                        </div>

                    </div>
                    <% } %>
                    <% if(userName != null){ %>
                              <i class="material-icons mdl-color-text--white" role="presentation">person</i>
                              <!-- add-circle -->
                              <span class="visuallyhidden">person</span>
                            </button>
                                <div class="mdl-card__media mdl-color--white mdl-color-text--grey-600">
                                    <img src="images/likes.jpg"> +1,720 
                                </div>
                                <div class="mdl-card__supporting-text meta meta--fill mdl-color-text--grey-600">
                                    <div>
                                            <% if(userName != null){ %>

                                                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                                                        Sign Out
                                                      </button>
                                                <% } %>
                                    </div>
                                    
                              </button>
                                </div>  
                        <% } %>
                    <!-- Register Modal -->
                    <dialog class="mdl-dialog">
                        <div class="mdl-dialog__content">
                            <div class="mdl-grid">
                                <div class="mdl-cell mdl-cell--10-col mdl-cell--10-col-tablet">
                                    <form action="#">
                                        <h4 class="mdl-color-text--black-600">Register</h4>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="text" id="username" />
                                            <label class="mdl-textfield__label" for="username">Username</label>

                                        </div>

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="text" id="email" />
                                            <label class="mdl-textfield__label" for="email">Email</label>

                                        </div>

                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="text" id="password" />
                                            <label class="mdl-textfield__label" for="password">Password</label>

                                        </div>
                                        <button id="register"
                                            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                                            Register
                                        </button>
                                        <br><br>

                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="mdl-dialog__actions mdl-dialog__actions--full-width">
                            <button type="button" class="mdl-button close">Close</button>
                        </div>
                    </dialog>

                    <!--  Keep Modal script here -->
                    <script>
                        var dialog = document.querySelector('dialog');
                        var showModalButton = document.querySelector('.show-modal');
                        if (!dialog.showModal) {
                            dialogPolyfill.registerDialog(dialog);
                        }
                        showModalButton.addEventListener('click', function () {
                            dialog.showModal();
                        });
                        dialog.querySelector('.close').addEventListener('click', function () {
                            dialog.close();
                        });
                    </script>


<div id="rwFlag" data-user="<%=userName%>"></div>

                    <!-- <div class="mdl-card__supporting-text meta meta--fill mdl-color-text--grey-600">
                        <div>
                            <strong>The Newist</strong>
                        </div>
                        <ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect" for="menubtn">
                            <li class="mdl-menu__item">About</li>
                            <li class="mdl-menu__item">Message</li>
                            <li class="mdl-menu__item">Favorite</li>
                            <li class="mdl-menu__item">Search</li>
                        </ul>
                        <button id="menubtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                            <i class="material-icons" role="presentation">more_vert</i>
                            <span class="visuallyhidden">show menu</span>
                        </button>
                    </div> -->
                </div>

                <!-- Add Card Partial -->

                <%if (userName !== null) { %>


                <% articles.forEach(function(articles){ %>
                <%- include('../partials/article', {articles: articles}) %>
                <% }); %>

                <% } %>




            </div>
            <!-- footer here -->
            <!-- <footer class="mdl-mini-footer">
                <% include ../partials/footer %>

            </footer> -->
        </main>
        <!-- <div class="mdl-layout__obfuscator"></div> -->
    </div>

    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="js/index.js" type="text/javascript"></script>


</body>

</html>